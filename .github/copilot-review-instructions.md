# GitHub Copilot Code Review Instructions

## 🎯 AI Pet Buddy プロジェクト専用レビュー指針

### 📋 基本レビュー方針
- **日本語優先**: コメント・ドキュメント・エラーメッセージは日本語で記述
- **TDD準拠**: テストファーストの実装順序を徹底確認
- **型安全性**: TypeScript型定義の厳密性チェック
- **Phase別品質**: 各Phase目標達成に向けた段階的実装確認

## 🔍 必須チェック項目

### TypeScript & 型安全性
- [ ] 型定義ファイル（types/）の更新確認
- [ ] Union型拡張時の段階的実装チェック
- [ ] `any`型の使用禁止（やむを得ない場合は明確な理由要求）
- [ ] 型テストファイルの存在確認
- [ ] 型エラーゼロの確認

### テスト品質（Vitest）
- [ ] 新機能に対応するテストの存在確認
- [ ] テストカバレッジ99%以上の維持
- [ ] `vitest run`での一発実行確認（watch mode回避）
- [ ] テストファイル命名規則遵守（*.test.tsx, *.test.ts）
- [ ] モックやスタブの適切な使用

### コンポーネント設計
- [ ] ファイル構成ルール遵守確認
  ```
  src/
  ├── types/      # 型定義 + 型テスト
  ├── utils/      # ビジネスロジック + 単体テスト
  ├── components/ # UIコンポーネント + UIテスト
  ├── hooks/      # カスタムフック + フックテスト
  ```
- [ ] 単一責任原則の遵守
- [ ] プロップス型定義の明確性
- [ ] アクセシビリティ（a11y）配慮

### AI Pet Buddy特有のルール
- [ ] ペット状態管理の一貫性（幸福度・エネルギー・レベル）
- [ ] 会話システムの条件分岐パターン確認
- [ ] 事前定義パターン + ランダム選択の実装確認
- [ ] ミニゲーム統合の適切性
- [ ] PWA対応の継続確認

## 🚨 品質ゲート基準

### 必須修正事項
- TypeScript型エラー
- ESLint警告・エラー
- テスト失敗
- セキュリティ脆弱性
- アクセシビリティ違反

### 推奨改善事項
- パフォーマンス最適化の余地
- コード重複の削減
- 可読性向上の提案
- エラーハンドリングの強化

## 📝 コミットメッセージ検証

### 必須形式チェック
```
feat: 機能概要

✨ 新機能
- 具体的な実装内容

🔧 バグ修正  
- 解決した問題

📋 その他変更
- 設定・ドキュメント等

Phase情報・目標達成状況 🚀
```

### コミット内容確認
- [ ] 変更内容とコミットメッセージの整合性
- [ ] 適切な絵文字の使用
- [ ] Phase情報の記載
- [ ] 破壊的変更の明記（該当時）

## 🔧 自動化スクリプト連携

### 実行推奨スクリプト
- `npm run test` - 全テスト実行
- `npm run lint` - 静的解析
- `./enhanced-quality-check.sh` - 品質総合チェック
- `./auto-review.sh` - 自動レビュー実行

### 音声通知システム
- 作業完了時の `afplay /System/Library/Sounds/Basso.aiff` 実行確認
- バックグラウンド実行の適切性確認

## 🎨 UI/UX品質基準

### デザイン一貫性
- [ ] モダンで美しいUI設計
- [ ] レスポンシブデザイン対応
- [ ] カラーパレットの統一性
- [ ] フォント・スペーシングの一貫性

### ユーザビリティ
- [ ] 直感的な操作性
- [ ] 適切なフィードバック機能
- [ ] エラー状態の分かりやすい表示
- [ ] ローディング状態の適切な表示

## 🌍 PWA & パフォーマンス

### PWA要件
- [ ] Service Worker の適切な実装
- [ ] Manifest.json の設定確認
- [ ] オフライン機能の動作確認
- [ ] インストール可能性の確認

### パフォーマンス
- [ ] Lighthouse スコア90点以上
- [ ] 画像最適化の実施
- [ ] バンドルサイズの最適化
- [ ] レンダリングパフォーマンスの確認

## 📊 メトリクス目標

### 品質指標
- テストカバレッジ: 99%以上
- TypeScript厳密度: strict mode有効
- ESLint警告: 0件
- Lighthouse Performance: 90点以上
- Lighthouse Accessibility: 100点

### 開発効率指標
- Phase目標達成率: 100%
- 自動化スクリプト活用率: 高
- コードレビューターンアラウンド: 24時間以内

## 🔄 継続的改善

### レビュー後アクション
- [ ] 指摘事項の修正完了確認
- [ ] テスト実行による動作確認
- [ ] 音声通知による完了通知
- [ ] Git push前の最終品質チェック

### 学習・改善ポイント
- コードレビューでの指摘パターン分析
- 品質向上のためのルール追加検討
- 自動化可能な箇所の特定
- 開発効率化の継続的改善

---

*このレビュー指針は AI Pet Buddy プロジェクトの品質向上と開発効率化を目的として策定されました。*
*プロジェクトの進化に合わせて継続的に更新していきます。*
